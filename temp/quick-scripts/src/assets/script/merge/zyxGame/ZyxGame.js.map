{"version":3,"sources":["assets/script/merge/zyxGame/ZyxGame.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { playerModule } from \"../dataModule/PlayerModule\";\nimport { zyxGameModule } from \"../dataModule/ZyxGameModule\";\nimport { uimanager } from \"../manager/Uimanager\";\nimport ZyxGridCom from \"./ZyxGridCom\";\n\nconst { ccclass, property } = cc._decorator;\n\n// 游戏主玩法场景\n@ccclass\nexport default class ZyxGame extends cc.Component {\n\n    @property(cc.Label)\n    ulblScore: cc.Label = null;\n\n    @property(cc.Label)\n    ulblDiamond: cc.Label = null;\n\n    @property(cc.Label)\n    ulblStarCnt: cc.Label = null;\n\n    @property(cc.Label)\n    ulblHammerCnt: cc.Label = null;\n\n    @property(cc.Label)\n    ulblBombCnt: cc.Label = null;\n\n    @property(cc.Label)\n    ulblAdCnt: cc.Label = null;\n\n    @property(cc.Node)\n    uImgStarBar: cc.Node = null;\n\n    @property(cc.Node)\n    uBtnHammer: cc.Node = null;\n\n    @property(cc.Node)\n    uBtnBomb: cc.Node = null;\n\n    @property(cc.Node)\n    uBtnClean: cc.Node = null;\n\n    @property(cc.Node)\n    uBoxGrid: cc.Node = null;\n\n    onLoad() {\n        this.initUI();\n\n        this.uBoxGrid.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        this.uBoxGrid.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n    }\n\n    start() {\n\n    }\n\n    initUI(): void {\n        this.ulblScore.string = `${zyxGameModule.gameInfo.score}`;\n        this.ulblDiamond.string = `${zyxGameModule.gameInfo.diamond}`;\n        this.ulblStarCnt.string = `${zyxGameModule.gameInfo.star}`;\n        this.ulblAdCnt.string = `(${zyxGameModule.gameInfo.adTimes})`;\n        this.ulblHammerCnt.string = `${playerModule.hammer}`;\n        this.ulblBombCnt.string = `${playerModule.bomb}`;\n    }\n\n    onTouchStart(e: cc.Event): void {\n        const posStart = e.currentTarget.getPosition();\n        console.log('onTouchStart', posStart);\n    }\n\n    async onTouchEnd() {\n        const newData = zyxGameModule.produce();\n        const grids = [];\n        for (let i = 0; i < 8; i++) {\n            if (i === 0 || newData[i][0] !== newData[i - 1][0]) {\n                const grid = await this.produceGrid(newData[i]);\n                this.uBoxGrid.addChild(grid);\n                grid.setPosition(new cc.Vec2(this.uBoxGrid.width / 8 * i, 0));\n            }\n        }\n    }\n\n    async produceGrid(gridInfo: number[]) {\n        const grid = await uimanager.loadPrefab('prefab/zyx/uComGrid');\n        const gridNode = cc.instantiate(grid);\n        gridNode.getComponent(ZyxGridCom).init(gridInfo);\n        return gridNode;\n    }\n}\n"]}