{"version":3,"sources":["assets/script/merge/zyxGame/ZyxMainScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { playerModule } from '../dataModule/PlayerModule';\nimport { LAYER } from '../define/TypeDefine';\nimport { audioMgr } from '../manager/AudioMgr';\nimport { uimanager } from '../manager/Uimanager';\nimport ZyxComTop from './ZyxComTop';\n\nconst { ccclass, property } = cc._decorator;\n\n// 游戏主场景\n@ccclass\nexport default class ZyxMainScene extends cc.Component {\n\n    @property(cc.Node)\n    uBtnStart: cc.Node = null;\n\n    public topCom: ZyxComTop = null;\n\n    onLoad() {\n        console.log('load ZyxMainScene');\n        this.uBtnStart.on(cc.Node.EventType.TOUCH_END, this.onStart, this);\n        this.uBtnStart.active = false;\n    }\n\n    async start() {\n        // 初始化界面层级\n        uimanager.init(this.node);\n\n        await this.initTopCom();\n\n        // login\n        playerModule.login(() => {\n            // 初始化音频\n            audioMgr.init();\n\n            this.initUI();\n        })\n\n        this.onShow();\n        this.onHide();\n    }\n\n    update() {\n        uimanager.udpateLayerShow();\n    }\n\n    onStart(): void {\n        this.initGamePanel();\n    }\n\n\n    // 初始化游戏主场景信息\n    initUI(): void {\n        this.uBtnStart.active = true;\n        this.topCom.getComponent(ZyxComTop).init();\n    }\n\n    // 初始化顶部信息\n    async initTopCom() {\n        const topPre = await uimanager.loadPrefab('prefab/zyx/uComTop');\n        const topNode = cc.instantiate(topPre);\n        uimanager.add(topNode, LAYER.UI);\n        topNode.setPosition(new cc.Vec2(0, cc.winSize.height / 2 - topNode.height / 2 - 50));\n\n        this.topCom = topNode;\n    }\n\n    // 初始化游戏界面\n    async initGamePanel() {\n        const prefab = await uimanager.loadPrefab('prefab/zyx/zyxGame');\n        const gameNode = cc.instantiate(prefab);\n        uimanager.add(gameNode, LAYER.UI);\n        gameNode.setPosition(new cc.Vec2(0, 0));\n    }\n\n    onShow(): void {\n        if (!window['wx']) return;\n        wx.onShow(() => {\n            console.log('onShow');\n        })\n    }\n\n    onHide(): void {\n        if (!window['wx']) return;\n        wx.onHide(() => {\n            console.log('onHide');\n        })\n    }\n}"]}