{"version":3,"sources":["assets/script/merge/zyxGame/ZyxGame.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2DAA0D;AAC1D,6DAA4D;AAC5D,mDAAuD;AACvD,4CAA8C;AAC9C,kDAAiD;AACjD,qDAAkE;AAClE,2CAAsC;AAEhC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,UAAU;AAEV;IAAqC,2BAAY;IAAjD;QAAA,qEA2VC;QAxVG,eAAS,GAAa,IAAI,CAAC;QAG3B,iBAAW,GAAa,IAAI,CAAC;QAG7B,iBAAW,GAAa,IAAI,CAAC;QAG7B,mBAAa,GAAa,IAAI,CAAC;QAG/B,iBAAW,GAAa,IAAI,CAAC;QAG7B,eAAS,GAAa,IAAI,CAAC;QAG3B,iBAAW,GAAY,IAAI,CAAC;QAG5B,gBAAU,GAAY,IAAI,CAAC;QAG3B,cAAQ,GAAY,IAAI,CAAC;QAGzB,eAAS,GAAY,IAAI,CAAC;QAG1B,cAAQ,GAAY,IAAI,CAAC;QAEjB,WAAK,GAAc,EAAE,CAAC;QAE9B,qDAAqD;QAC7C,mBAAa,GAAY,KAAK,CAAC;QAEvC,YAAY;QACJ,gBAAU,GAAY,KAAK,CAAC;;IAkTxC,CAAC;IAhTG,wBAAM,GAAN;QACI,IAAI,CAAC,MAAM,EAAE,CAAC;QAEd,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAEhE,2BAAY,CAAC,EAAE,CAAC,kBAAS,CAAC,eAAe,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC7D,2BAAY,CAAC,EAAE,CAAC,kBAAS,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACpE,CAAC;IAED,uBAAK,GAAL;IAEA,CAAC;IAED,2BAAS,GAAT;QACI,6BAAa,CAAC,QAAQ,GAAG;YACrB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,E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","file":"","sourceRoot":"/","sourcesContent":["import { playerModule } from \"../dataModule/PlayerModule\";\nimport { zyxGameModule } from \"../dataModule/ZyxGameModule\";\nimport { gridContentType } from \"../define/TypeDefine\";\nimport { EventType } from \"../manager/Define\";\nimport { uimanager } from \"../manager/Uimanager\";\nimport { eventManager, EventManager } from \"../util/EventManager\";\nimport ZyxGridCom from \"./ZyxGridCom\";\n\nconst { ccclass, property } = cc._decorator;\n\n// 游戏主玩法场景\n@ccclass\nexport default class ZyxGame extends cc.Component {\n\n    @property(cc.Label)\n    ulblScore: cc.Label = null;\n\n    @property(cc.Label)\n    ulblDiamond: cc.Label = null;\n\n    @property(cc.Label)\n    ulblStarCnt: cc.Label = null;\n\n    @property(cc.Label)\n    ulblHammerCnt: cc.Label = null;\n\n    @property(cc.Label)\n    ulblBombCnt: cc.Label = null;\n\n    @property(cc.Label)\n    ulblAdCnt: cc.Label = null;\n\n    @property(cc.Node)\n    uImgStarBar: cc.Node = null;\n\n    @property(cc.Node)\n    uBtnHammer: cc.Node = null;\n\n    @property(cc.Node)\n    uBtnBomb: cc.Node = null;\n\n    @property(cc.Node)\n    uBtnClean: cc.Node = null;\n\n    @property(cc.Node)\n    uBoxGrid: cc.Node = null;\n\n    private grids: cc.Node[] = [];\n\n    // 掉落发生情况（掉落需要自底向上检测，一轮检测后再检测下一轮，直到最终可以发生掉落的情况全部检测完毕）\n    private hasDropAction: boolean = false;\n\n    // 是否已经生产了新的\n    private hasProduce: boolean = false;\n\n    onLoad() {\n        this.initUI();\n\n        this.uBtnClean.on(cc.Node.EventType.TOUCH_END, this.test, this);\n\n        eventManager.on(EventType.ZYX_CHECK_MERGE, this.check, this);\n        eventManager.on(EventType.ZYX_RESET_GAME, this.resetGame, this);\n    }\n\n    start() {\n\n    }\n\n    resetGame(): void {\n        zyxGameModule.gridInfo = [\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[0, 0, 0], [0, 0, 0], [3, 1, 1], [3, 1, 1], [3, 1, 1], [0, 0, 0], [0, 0, 0], [0, 0, 0]],\n            [[1, 1, 2], [1, 1, 3], [1, 1, 4], [1, 1, 5], [1, 1, 6], [1, 1, 7], [1, 1, 8], [1, 1, 9]],\n        ]\n\n        this.initUI();\n    }\n\n    initUI(): void {\n        this.ulblScore.string = `${zyxGameModule.gameInfo.score}`;\n        this.ulblDiamond.string = `${zyxGameModule.gameInfo.diamond}`;\n        this.ulblStarCnt.string = `${zyxGameModule.gameInfo.star}`;\n        this.ulblAdCnt.string = `(${zyxGameModule.gameInfo.adTimes})`;\n        this.ulblHammerCnt.string = `${playerModule.hammer}`;\n        this.ulblBombCnt.string = `${playerModule.bomb}`;\n\n        this.initChessBoard();\n    }\n\n    // 初始化棋盘信息\n    async initChessBoard() {\n        this.uBoxGrid.destroyAllChildren();\n        this.grids = [];\n\n        for (let row = 0; row < zyxGameModule.gridInfo.length; row++) {\n            for (let col = 0; col < zyxGameModule.gridInfo[row].length; col++) {\n                if (col === 0) {\n                    if (zyxGameModule.gridInfo[row][col][1] !== gridContentType.EMPTY) {\n                        const grid = await this.produceGrid(zyxGameModule.gridInfo[row][col]);\n                        this.uBoxGrid.addChild(grid);\n                        grid.setPosition(new cc.Vec2(zyxGameModule.gridsWidth * col, zyxGameModule.gridsWidth * (10 - row) - zyxGameModule.gridsWidth));\n                        grid.getComponent(ZyxGridCom).setRowCel(row, col);\n                        this.grids.push(grid);\n                    }\n                } else if (zyxGameModule.gridInfo[row][col][1] != gridContentType.EMPTY && zyxGameModule.gridInfo[row][col][2] !== zyxGameModule.gridInfo[row][col - 1][2]) {\n                    const grid = await this.produceGrid(zyxGameModule.gridInfo[row][col]);\n                    this.uBoxGrid.addChild(grid);\n                    grid.setPosition(new cc.Vec2(zyxGameModule.gridsWidth * col, zyxGameModule.gridsWidth * (10 - row) - zyxGameModule.gridsWidth));\n                    grid.getComponent(ZyxGridCom).setRowCel(row, col);\n                    this.grids.push(grid);\n                }\n            }\n        }\n    }\n\n    produce() {\n        this.moveUp();\n\n        this.produceRow();\n    }\n\n    // 生成新的一行\n    async produceRow() {\n        // 剔除顶部空余的一行\n        zyxGameModule.gridInfo.shift();\n\n        // 生成新的一行数据\n        const newData = zyxGameModule.produce();\n        zyxGameModule.gridInfo.push(newData);\n        for (let i = 0; i < 8; i++) {\n            const row = 9;\n            if (i === 0) {\n                if (zyxGameModule.gridInfo[row][i][1] !== gridContentType.EMPTY) {\n                    const grid = await this.produceGrid(zyxGameModule.gridInfo[row][i]);\n                    this.uBoxGrid.addChild(grid);\n                    grid.setPosition(new cc.Vec2(zyxGameModule.gridsWidth * i, -84));\n                    grid.getComponent(ZyxGridCom).setRowCel(row, i);\n                    this.grids.push(grid);\n                }\n            } else if (zyxGameModule.gridInfo[row][i][1] != gridContentType.EMPTY && zyxGameModule.gridInfo[row][i][2] !== zyxGameModule.gridInfo[row][i - 1][2]) {\n                const grid = await this.produceGrid(zyxGameModule.gridInfo[row][i]);\n                this.uBoxGrid.addChild(grid);\n                grid.setPosition(new cc.Vec2(zyxGameModule.gridsWidth * i, -84));\n                grid.getComponent(ZyxGridCom).setRowCel(row, i);\n                this.grids.push(grid);\n            }\n        }\n\n        // 展示新格子\n        this.showNewGrids();\n    }\n\n    // 生成格子\n    async produceGrid(gridInfo: number[]) {\n        const grid = await uimanager.loadPrefab('prefab/zyx/uComGrid');\n        const gridNode = cc.instantiate(grid);\n        gridNode.getComponent(ZyxGridCom).init(gridInfo);\n        return gridNode;\n    }\n\n    // 生成之前，先上移\n    moveUp(): void {\n        for (let i = 0; i < this.grids.length; i++) {\n            const grid = this.grids[i];\n            cc.tween(grid)\n                .to(0.5, { y: grid.y + 84 }, { easing: 'cubicInOut' })\n                .start();\n\n            grid.getComponent(ZyxGridCom).moveUp();\n        }\n    }\n\n    // 展示新格子\n    showNewGrids(): void {\n        let showEnding: boolean = false;\n        for (let i = 0; i < this.grids.length; i++) {\n            const grid = this.grids[i];\n            if (grid.y !== -84) continue;\n            cc.tween(grid)\n                .to(0.5, { y: grid.y + 84 }, { easing: 'cubicInOut' })\n                .call(() => {\n                    if (showEnding) return;\n                    showEnding = true;\n                    this.hasDropAction = false;\n                    this.drop(9);\n                })\n                .start();\n        }\n    }\n\n    // 循环检测是否可以掉落和消除\n    check(): void {\n        this.hasProduce = false;\n        this.drop(9);\n    }\n\n    // 进行合成操作\n    merge(): void {\n        let mergeTimes = 0;\n        // 检测每一行是否有可以消除的格子\n        for (let row = 0; row < zyxGameModule.gridInfo.length; row++) {\n            const rowData = zyxGameModule.gridInfo[row];\n            let hasEmptyGrid = false;\n            for (let j = 0; j < rowData.length; j++) {\n                if (rowData[j][1] === gridContentType.EMPTY) {\n                    hasEmptyGrid = true;\n                    break;\n                }\n            }\n\n            // 如果没有空格子，那就可以进行消除\n            const uniqueIds = [];\n            if (!hasEmptyGrid) {\n                mergeTimes++;\n                for (let j = 0; j < rowData.length; j++) {\n                    if (uniqueIds.indexOf(rowData[j][2]) === -1 && rowData[j][2] !== 0) {\n                        uniqueIds.push(rowData[j][2]);\n                    }\n\n                    zyxGameModule.gridInfo[row][j] = [0, 0, 0];\n                }\n            }\n\n            // 消除\n            for (let i = 0; i < uniqueIds.length; i++) {\n                const uniqueId = uniqueIds[i];\n                this.eliminateGrid(uniqueId);\n            }\n        }\n\n        if (mergeTimes > 0) {\n            uimanager.showTips('發生消除');\n            this.addScore(mergeTimes);\n            this.drop(9);\n        } else {\n            const isGameOver = this.checkGameOver();\n            if (!isGameOver && !this.hasProduce) {\n                this.hasProduce = true;\n                this.produce();\n            } else {\n                zyxGameModule.selectGirdUniqueId = -1;\n                console.log('action over:', zyxGameModule.gridInfo);\n            }\n        }\n    }\n\n    // 消除\n    eliminateGrid(uniqueID: number): void {\n        for (let i = 0; i < this.grids.length; i++) {\n            if (this.grids[i].getComponent(ZyxGridCom).uniqueId === uniqueID) {\n                console.log('消除', uniqueID);\n                this.grids[i].getComponent(ZyxGridCom).eliminate();\n                this.grids.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    // 检测当前行的上一行是否有掉落情况，如果有则进行掉落操作\n    drop(row): void {\n        if (row === 0) {\n            if (this.hasDropAction) {\n                this.hasDropAction = false;\n                console.log('新一轮检测');\n                this.drop(9);\n            } else {\n                setTimeout(() => {\n                    this.merge();\n                }, 400);\n            }\n            return;\n        }\n\n        for (let col = 0; col < 8; col++) {\n            if (zyxGameModule.gridInfo[row][col][1] === gridContentType.EMPTY && zyxGameModule.gridInfo[row - 1][col][1] !== gridContentType.EMPTY) {\n                // 检测是否可以掉落\n                const hasDrop = this.dropGrid(row - 1, col);\n                if (hasDrop) {\n                    this.hasDropAction = true;\n                }\n                continue;\n            }\n        }\n\n        this.drop(row - 1);\n    }\n\n    dropGrid(row: number, col: number): boolean {\n        // 检测对应的空格子是否可以容纳掉下来的格子类型\n        const uniqueID = zyxGameModule.gridInfo[row][col][2];\n        const checkCols = [];\n        for (let i = 0; i < 8; i++) {\n            if (zyxGameModule.gridInfo[row][i][2] === uniqueID) {\n                checkCols.push(i);\n            }\n        }\n\n        let canDrop = true;\n        for (let i = 0; i < checkCols.length; i++) {\n            const col = checkCols[i];\n            if (zyxGameModule.gridInfo[row + 1][col][1] !== gridContentType.EMPTY) {\n                canDrop = false;\n                return false;\n            }\n        }\n\n        // 如果可以掉落，那就将数据进行交换，同时更新格子的自身属性和位置信息\n        for (let i = 0; i < checkCols.length; i++) {\n            const col = checkCols[i];\n            zyxGameModule.gridInfo[row + 1][col][0] = zyxGameModule.gridInfo[row][col][0];\n            zyxGameModule.gridInfo[row + 1][col][1] = zyxGameModule.gridInfo[row][col][1];\n            zyxGameModule.gridInfo[row + 1][col][2] = zyxGameModule.gridInfo[row][col][2];\n\n            zyxGameModule.gridInfo[row][col][0] = 0;\n            zyxGameModule.gridInfo[row][col][1] = gridContentType.EMPTY;\n            zyxGameModule.gridInfo[row][col][2] = 0;\n        }\n\n        console.log('掉落:', uniqueID);\n\n        for (let i = 0; i < this.grids.length; i++) {\n            const grid = this.grids[i];\n            if (grid.getComponent(ZyxGridCom).uniqueId === uniqueID) {\n                grid.getComponent(ZyxGridCom).moveDown();\n                const tarY = zyxGameModule.gridsWidth * (10 - row - 1) - zyxGameModule.gridsWidth;\n                cc.tween(grid)\n                    .to(0.2, { y: tarY }, { easing: 'quartIn' })\n                    .start();\n            }\n        }\n\n        return canDrop;\n    }\n\n    // 检验是否结束\n    checkGameOver(): boolean {\n        if (zyxGameModule.checkGameOver()) {\n            uimanager.showGameOver();\n            return true;\n        }\n        return false;\n    }\n\n    // 加分\n    addScore(score: number): void {\n        zyxGameModule.gameInfo.score += score;\n        this.ulblScore.string = zyxGameModule.gameInfo.score.toString();\n    }\n\n    test(): void {\n        console.log(zyxGameModule.gridInfo);\n    }\n}\n"]}